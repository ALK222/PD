\haddockmoduleheading{Interprete}
\label{module:Interprete}
\haddockbeginheader
{\haddockverb\begin{verbatim}
module Interprete (
    Var, Program, showProgram, VarVal, State, mostrarStack,
    Symbol(Equals, Times, Minus, Plus),
    Comparator(LEQ, GEQ, Less, Greater, Not, And, Or, Eq), Operation(V, I, O),
    Instruction(W, A), Comp(Void, CC, CB, CO), isVal, getVal, setVal, resolver,
    calc, calcular, ejecutarAux, ejecutar, ejecuta, ejecutarAuxIO, ejecutarIO,
    ejecutaIO, s0, s1, s2, factorial, s3, s4, s5, sumador, testResults,
    testMode, freeMode, fileMode, getInt, entrypoint, main
  ) where\end{verbatim}}
\haddockendheader

Práctica final de Programación Declarativa (PD) de Ingeniería Informática de la UCM del curso 2023-2024\par
\section{DATA TYPES}
\begin{haddockdesc}
\item[\begin{tabular}{@{}l}
type Var = String
\end{tabular}]
{\haddockbegindoc
Alias for Variables\par}
\end{haddockdesc}
\begin{haddockdesc}
\item[\begin{tabular}{@{}l}
type Program = {\char 91}Instruction{\char 93}
\end{tabular}]
{\haddockbegindoc
Alias for a list of instructions\par}
\end{haddockdesc}
\begin{haddockdesc}
\item[\begin{tabular}{@{}l}
showProgram :: Program -> String
\end{tabular}]
{\haddockbegindoc
\section*{Description}
Shows a full program\par}
\end{haddockdesc}
\begin{haddockdesc}
\item[\begin{tabular}{@{}l}
type VarVal = (Var, Int)
\end{tabular}]
{\haddockbegindoc
Alias for the program way of handling with variables\par}
\end{haddockdesc}
\begin{haddockdesc}
\item[\begin{tabular}{@{}l}
type State = {\char 91}VarVal{\char 93}
\end{tabular}]
{\haddockbegindoc
Alias for the program stack\par}
\end{haddockdesc}
\begin{haddockdesc}
\item[\begin{tabular}{@{}l}
mostrarStack :: State -> IO ()
\end{tabular}]
{\haddockbegindoc
\section*{Description}
Shows the current state of the stack and waits for an enter key press to continue execution\par}
\end{haddockdesc}
\begin{haddockdesc}
\item[\begin{tabular}{@{}l}
data Symbol
\end{tabular}]
{\haddockbegindoc
Posible arithmetic operations in the program\par
\enspace \emph{Constructors}\par
\haddockbeginconstrs
\haddockdecltt{=} & \haddockdecltt{Plus} & \\
\haddockdecltt{|} & \haddockdecltt{Minus} & \\
\haddockdecltt{|} & \haddockdecltt{Times} & \\
\haddockdecltt{|} & \haddockdecltt{Equals} & \\
\end{tabulary}\par}
\end{haddockdesc}
\begin{haddockdesc}
\item[\begin{tabular}{@{}l}
instance Read Symbol\\instance Show Symbol
\end{tabular}]
\end{haddockdesc}
\begin{haddockdesc}
\item[\begin{tabular}{@{}l}
data Comparator
\end{tabular}]
{\haddockbegindoc
Posible logic operations in the program\par
\enspace \emph{Constructors}\par
\haddockbeginconstrs
\haddockdecltt{=} & \haddockdecltt{Greater} & \\
\haddockdecltt{|} & \haddockdecltt{Less} & \\
\haddockdecltt{|} & \haddockdecltt{GEQ} & \\
\haddockdecltt{|} & \haddockdecltt{LEQ} & \\
\haddockdecltt{|} & \haddockdecltt{Eq} & \\
\haddockdecltt{|} & \haddockdecltt{Not} & \\
\haddockdecltt{|} & \haddockdecltt{And} & \\
\haddockdecltt{|} & \haddockdecltt{Or} & \\
\end{tabulary}\par}
\end{haddockdesc}
\begin{haddockdesc}
\item[\begin{tabular}{@{}l}
instance Read Comparator\\instance Show Comparator
\end{tabular}]
\end{haddockdesc}
\begin{haddockdesc}
\item[\begin{tabular}{@{}l}
data Operation
\end{tabular}]
{\haddockbegindoc
Arithmetic operations in the program. Can use variables or integers.\par
\enspace \emph{Constructors}\par
\haddockbeginconstrs
\haddockdecltt{=} & \haddockdecltt{O} & Full operation  \\
                                        & \qquad \haddockdecltt{Operation} & variable to change value  \\
                                        & \qquad \haddockdecltt{Symbol} & arithmetic operation  \\
                                        & \qquad \haddockdecltt{Operation} & Operation to perform  \\
\haddockdecltt{|} & \haddockdecltt{I} & Operation is only an integer  \\
                                        & \qquad \haddockdecltt{Int} & Integer to operate with  \\
\haddockdecltt{|} & \haddockdecltt{V} & Operation uses a variable  \\
                                        & \qquad \haddockdecltt{Var} & Variable to get the value from  \\
\end{tabulary}\par}
\end{haddockdesc}
\begin{haddockdesc}
\item[\begin{tabular}{@{}l}
instance Read Operation\\instance Show Operation
\end{tabular}]
\end{haddockdesc}
\begin{haddockdesc}
\item[\begin{tabular}{@{}l}
data Instruction
\end{tabular}]
{\haddockbegindoc
Instructions inside the program, can be assigning new values to variables or while loops\par
\enspace \emph{Constructors}\par
\haddockbeginconstrs
\haddockdecltt{=} & \haddockdecltt{A} & Assign operations  \\
                                        & \qquad \haddockdecltt{Var} & Variable to change value  \\
                                        & \qquad \haddockdecltt{Operation} & Operation to change value  \\
\haddockdecltt{|} & \haddockdecltt{W} & While loop  \\
                                        & \qquad \haddockdecltt{Comp} & Comparator to end the loop  \\
                                        & \qquad \haddockdecltt{Program} & Set of instructions inside the loop  \\
\end{tabulary}\par}
\end{haddockdesc}
\begin{haddockdesc}
\item[\begin{tabular}{@{}l}
instance Read Instruction\\instance Show Instruction
\end{tabular}]
\end{haddockdesc}
\begin{haddockdesc}
\item[\begin{tabular}{@{}l}
data Comp
\end{tabular}]
{\haddockbegindoc
Boolean comparators for while loops (\haddockid{W})\par
\enspace \emph{Constructors}\par
\haddockbeginconstrs
\haddockdecltt{=} & \haddockdecltt{CO} & Arithmetic comparator  \\
                                         & \qquad \haddockdecltt{Operation} & Variable to compare  \\
                                         & \qquad \haddockdecltt{Comparator} & Comparator used  \\
                                         & \qquad \haddockdecltt{Operation} & Integer to compare to  \\
\haddockdecltt{|} & \haddockdecltt{CB} & Boolean Comparator  \\
                                         & \qquad \haddockdecltt{Bool} & First part of the comparison  \\
                                         & \qquad \haddockdecltt{Comparator} & Comparator used  \\
                                         & \qquad \haddockdecltt{Bool} & Second part of the comparison  \\
\haddockdecltt{|} & \haddockdecltt{CC} & Comparator of comparators  \\
                                         & \qquad \haddockdecltt{Comp} & Variable to compare  \\
                                         & \qquad \haddockdecltt{Comparator} & Comparator used  \\
                                         & \qquad \haddockdecltt{Comp} & Integer to compare to  \\
\haddockdecltt{|} & \haddockdecltt{Void} & Void comparator, used for not clauses  \\
\end{tabulary}\par}
\end{haddockdesc}
\begin{haddockdesc}
\item[\begin{tabular}{@{}l}
instance Read Comp\\instance Show Comp
\end{tabular}]
\end{haddockdesc}
\section{STACK OPERATIONS}
\begin{haddockdesc}
\item[\begin{tabular}{@{}l}
isVal
\end{tabular}]
{\haddockbegindoc
\haddockbeginargs
\haddockdecltt{::} & \haddockdecltt{State} & current stack of the program \\
\haddockdecltt{->} & \haddockdecltt{Var} & Variable to check \\
\haddockdecltt{->} & \haddockdecltt{Bool} & Variable is in stack or not \\
\end{tabulary}\par
\section*{Description}
Checks if a given variable name is in the stack.\par}
\end{haddockdesc}
\begin{haddockdesc}
\item[\begin{tabular}{@{}l}
getVal
\end{tabular}]
{\haddockbegindoc
\haddockbeginargs
\haddockdecltt{::} & \haddockdecltt{State} & Current stack of the program \\
\haddockdecltt{->} & \haddockdecltt{Var} & Variable to check \\
\haddockdecltt{->} & \haddockdecltt{Int} & Value of the given variable \\
\end{tabulary}\par
\section*{Description}
Gives a the stored value for a value for a variable. If the variable is not in the stack, the function throws an error.\par}
\end{haddockdesc}
\begin{haddockdesc}
\item[\begin{tabular}{@{}l}
setVal
\end{tabular}]
{\haddockbegindoc
\haddockbeginargs
\haddockdecltt{::} & \haddockdecltt{State} & Current stack of the program \\
\haddockdecltt{->} & \haddockdecltt{Var} & Variable to update \\
\haddockdecltt{->} & \haddockdecltt{Int} & New value \\
\haddockdecltt{->} & \haddockdecltt{State} & Updated stack \\
\end{tabulary}\par
\section*{Description}
Changes the value of a given variable to a new one.\par}
\end{haddockdesc}
\section{INSTRUCTION OPERATIONS}
\begin{haddockdesc}
\item[\begin{tabular}{@{}l}
resolver :: Comp -> State -> Bool
\end{tabular}]
{\haddockbegindoc
\section*{Description}
Computes a boolean from the different comparator types\par}
\end{haddockdesc}
\begin{haddockdesc}
\item[\begin{tabular}{@{}l}
calc
\end{tabular}]
{\haddockbegindoc
\haddockbeginargs
\haddockdecltt{::} & \haddockdecltt{Int} & First int \\
\haddockdecltt{->} & \haddockdecltt{Symbol} & Operation to perform \\
\haddockdecltt{->} & \haddockdecltt{Int} & Second int \\
\haddockdecltt{->} & \haddockdecltt{Int} & Result \\
\end{tabulary}\par
\section*{Description}
Performs an arithmetic operation (\haddockid{Symbol}) with two Integers\par}
\end{haddockdesc}
\begin{haddockdesc}
\item[\begin{tabular}{@{}l}
calcular
\end{tabular}]
{\haddockbegindoc
\haddockbeginargs
\haddockdecltt{::} & \haddockdecltt{Operation} & Operation to perform \\
\haddockdecltt{->} & \haddockdecltt{State} & Current state of the program \\
\haddockdecltt{->} & \haddockdecltt{Int} & Result of the operation \\
\end{tabulary}\par
\section*{Description}
Performs an arithmetic operation given the operation and the current stack of the program\par}
\end{haddockdesc}
\section{EXECUTION}
\begin{haddockdesc}
\item[\begin{tabular}{@{}l}
ejecutarAux
\end{tabular}]
{\haddockbegindoc
\haddockbeginargs
\haddockdecltt{::} & \haddockdecltt{Instruction} & Instruction to execute \\
\haddockdecltt{->} & \haddockdecltt{State} & Current state of the program \\
\haddockdecltt{->} & \haddockdecltt{State} & Next state of the program \\
\end{tabulary}\par
\section*{Description}
Auxiliary function for \haddockid{ejecutar} splitted into the different types of instructions available.\par}
\end{haddockdesc}
\begin{haddockdesc}
\item[\begin{tabular}{@{}l}
ejecutar
\end{tabular}]
{\haddockbegindoc
\haddockbeginargs
\haddockdecltt{::} & \haddockdecltt{Program} & Set of instructions to compute \\
\haddockdecltt{->} & \haddockdecltt{State} & Current state of the program \\
\haddockdecltt{->} & \haddockdecltt{State} & New state of the program \\
\end{tabulary}\par
\section*{Description}
Executes all the instructions in a program in sequence\par}
\end{haddockdesc}
\begin{haddockdesc}
\item[\begin{tabular}{@{}l}
ejecuta
\end{tabular}]
{\haddockbegindoc
\haddockbeginargs
\haddockdecltt{::} & \haddockdecltt{Program} & \\
\haddockdecltt{->} & \haddockdecltt{State} & Initial state \\
\haddockdecltt{->} & \haddockdecltt{Int} & Value of the last initialized variable \\
\end{tabulary}\par
\section*{Description}
Executes all the instructions in a given program with a given initial state and returns the last variable declared\par}
\end{haddockdesc}
\section{IO EXECUTION}
\begin{haddockdesc}
\item[\begin{tabular}{@{}l}
ejecutarAuxIO
\end{tabular}]
{\haddockbegindoc
\haddockbeginargs
\haddockdecltt{::} & \haddockdecltt{Instruction} & \\
\haddockdecltt{->} & \haddockdecltt{State} & Current state of the program \\
\haddockdecltt{->} & \haddockdecltt{IO State} & Next state of the program \\
\end{tabulary}\par
\section*{Description}
Executes an instruction showing the current state of the stack\par}
\end{haddockdesc}
\begin{haddockdesc}
\item[\begin{tabular}{@{}l}
ejecutarIO
\end{tabular}]
{\haddockbegindoc
\haddockbeginargs
\haddockdecltt{::} & \haddockdecltt{Program} & Set of instructions \\
\haddockdecltt{->} & \haddockdecltt{State} & Initial stack \\
\haddockdecltt{->} & \haddockdecltt{IO State} & Value of last initialized variable \\
\end{tabulary}\par
\section*{Description}
Executes an entire program showing the state of the stack before every instruction. See \haddockid{ejecutarAuxIO}\par}
\end{haddockdesc}
\begin{haddockdesc}
\item[\begin{tabular}{@{}l}
ejecutaIO
\end{tabular}]
{\haddockbegindoc
\haddockbeginargs
\haddockdecltt{::} & \haddockdecltt{Program} & Set of instructions \\
\haddockdecltt{->} & \haddockdecltt{State} & Initial stack \\
\haddockdecltt{->} & \haddockdecltt{IO Int} & Value of last initialized variable \\
\end{tabulary}\par
\section*{Description}
Executes an entire program and returns the value of the R variable showing the state of the stack before every instruction. See \haddockid{ejecutarIO}.\par}
\end{haddockdesc}
\section{EXAMPLES}
\begin{haddockdesc}
\item[\begin{tabular}{@{}l}
s0 :: State
\end{tabular}]
{\haddockbegindoc
Initial state for \haddockid{factorial}\par}
\end{haddockdesc}
\begin{haddockdesc}
\item[\begin{tabular}{@{}l}
s1 :: State
\end{tabular}]
{\haddockbegindoc
Initial state for \haddockid{factorial}\par}
\end{haddockdesc}
\begin{haddockdesc}
\item[\begin{tabular}{@{}l}
s2 :: State
\end{tabular}]
{\haddockbegindoc
Initial state for \haddockid{factorial}\par}
\end{haddockdesc}
\begin{haddockdesc}
\item[\begin{tabular}{@{}l}
factorial :: Program
\end{tabular}]
{\haddockbegindoc
\section*{Description}
Factorial calculation for a number given\par
\begin{quote}
{\haddockverb\begin{verbatim}
 Y := X
 R := 1
 while (Y > 0) {
  R := R :* Y
  Y := Y :-1
 }
\end{verbatim}}
\end{quote}}
\end{haddockdesc}
\begin{haddockdesc}
\item[\begin{tabular}{@{}l}
s3 :: State
\end{tabular}]
{\haddockbegindoc
Initial state for \haddockid{sumador}\par}
\end{haddockdesc}
\begin{haddockdesc}
\item[\begin{tabular}{@{}l}
s4 :: State
\end{tabular}]
{\haddockbegindoc
Initial state for \haddockid{sumador}\par}
\end{haddockdesc}
\begin{haddockdesc}
\item[\begin{tabular}{@{}l}
s5 :: State
\end{tabular}]
{\haddockbegindoc
initial state for \haddockid{sumador}\par}
\end{haddockdesc}
\begin{haddockdesc}
\item[\begin{tabular}{@{}l}
sumador :: Program
\end{tabular}]
{\haddockbegindoc
\section*{Description}
Summation of from 1 to a given number\par
\begin{quote}
{\haddockverb\begin{verbatim}
i := 1
R := 0
while (i < X && R != \textbf{INT_MAX}){
  R := i :+ R
  i := i :+1
}
\end{verbatim}}
\end{quote}}
\end{haddockdesc}
\section{EXECUTION MODES}
\begin{haddockdesc}
\item[\begin{tabular}{@{}l}
testResults
\end{tabular}]
{\haddockbegindoc
\haddockbeginargs
\haddockdecltt{::} & \haddockdecltt{Bool} & debug mode enabled \\
\haddockdecltt{->} & \haddockdecltt{Program} & Instructions to execute \\
\haddockdecltt{->} & \haddockdecltt{State} & Initial state for the program \\
\haddockdecltt{->} & \haddockdecltt{Int} & Expected result of the program \\
\haddockdecltt{->} & \haddockdecltt{IO ()} & \\
\end{tabulary}\par
\section*{Description}
Executes a program with a given state and shows the result compared to the expected result\par}
\end{haddockdesc}
\begin{haddockdesc}
\item[\begin{tabular}{@{}l}
testMode
\end{tabular}]
{\haddockbegindoc
\haddockbeginargs
\haddockdecltt{::} & \haddockdecltt{Bool} & debug mode enabled \\
\haddockdecltt{->} & \haddockdecltt{IO ()} & \\
\end{tabulary}\par
\section*{Description}
Execution of varios programs with different initial stacks and showing results compared to expected results\par}
\end{haddockdesc}
\begin{haddockdesc}
\item[\begin{tabular}{@{}l}
freeMode
\end{tabular}]
{\haddockbegindoc
\haddockbeginargs
\haddockdecltt{::} & \haddockdecltt{Bool} & debug mode enabled \\
\haddockdecltt{->} & \haddockdecltt{IO ()} & \\
\end{tabulary}\par
\section*{Description}
Lets the user write their own program and initial state and shows the result\par}
\end{haddockdesc}
\begin{haddockdesc}
\item[\begin{tabular}{@{}l}
fileMode
\end{tabular}]
{\haddockbegindoc
\haddockbeginargs
\haddockdecltt{::} & \haddockdecltt{Bool} & Debug mode enabled \\
\haddockdecltt{->} & \haddockdecltt{IO ()} & \\
\end{tabulary}\par
\section*{Description}
Lets the user give a file with a written program an then asks for a initial state. Shows results after execution\par}
\end{haddockdesc}
\section{UTILITIES}
\begin{haddockdesc}
\item[\begin{tabular}{@{}l}
getInt :: IO Int
\end{tabular}]
{\haddockbegindoc
\section*{Descripción}
Coge un número desde la entrada.\par}
\end{haddockdesc}
\begin{haddockdesc}
\item[\begin{tabular}{@{}l}
entrypoint :: IO ()
\end{tabular}]
{\haddockbegindoc
\section*{Description}
Main menu for the program, lets the user choose mode and graphical options\par}
\end{haddockdesc}
\begin{haddockdesc}
\item[\begin{tabular}{@{}l}
main :: IO ()
\end{tabular}]
{\haddockbegindoc
\section*{Description}
Entrypoint\par}
\end{haddockdesc}